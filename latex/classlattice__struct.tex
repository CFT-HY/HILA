\doxysection{lattice\+\_\+struct Class Reference}
\hypertarget{classlattice__struct}{}\label{classlattice__struct}\index{lattice\_struct@{lattice\_struct}}


{\ttfamily \#include $<$lattice.\+h$>$}



Collaboration diagram for lattice\+\_\+struct\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlattice__struct__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structlattice__struct_1_1allnodes}{allnodes}}
\begin{DoxyCompactList}\small\item\em information about all nodes \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structlattice__struct_1_1comm__node__struct}{comm\+\_\+node\+\_\+struct}}
\begin{DoxyCompactList}\small\item\em Information necessary to communicate with a node. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structlattice__struct_1_1gen__comminfo__struct}{gen\+\_\+comminfo\+\_\+struct}}
\begin{DoxyCompactList}\small\item\em general communication \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structlattice__struct_1_1nn__comminfo__struct}{nn\+\_\+comminfo\+\_\+struct}}
\begin{DoxyCompactList}\small\item\em nn-\/communication has only 1 node to talk to \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structlattice__struct_1_1node__struct}{node\+\_\+struct}}
\begin{DoxyCompactList}\small\item\em Information about the node stored on this process. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlattice__struct_a12f6b6a0c725399c8aa00740274b34b0}\label{classlattice__struct_a12f6b6a0c725399c8aa00740274b34b0} 
void {\bfseries setup} (const \mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} \&siz)
\begin{DoxyCompactList}\small\item\em General lattice setup. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlattice__struct_a11f98bf4122968756fddcdf919170d01}{setup\+\_\+nodes}} ()
\begin{DoxyCompactList}\small\item\em invert the mynode index -\/\texorpdfstring{$>$}{>} location (only on this node) \end{DoxyCompactList}\item 
\Hypertarget{classlattice__struct_a42fcdd75a779e3d63c5ca80827f125bc}\label{classlattice__struct_a42fcdd75a779e3d63c5ca80827f125bc} 
bool {\bfseries is\+\_\+on\+\_\+mynode} (const \mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} \&c) const
\begin{DoxyCompactList}\small\item\em Is the coordinate on THIS node. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classlattice__struct_af0b4173259da0e0436100efed653de06}{node\+\_\+rank}} (const \mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} \&c) const
\item 
unsigned \mbox{\hyperlink{classlattice__struct_af06f3e962e02f77edb5a6b096a44340d}{site\+\_\+index}} (const \mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} \&c) const
\item 
unsigned \mbox{\hyperlink{classlattice__struct_adfe565822202f872c354dcc8bd5057b9}{site\+\_\+index}} (const \mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} \&c, const unsigned node) const
\item 
void \mbox{\hyperlink{classlattice__struct_a93c4adb3abd6497d1b7c7154042fb0b9}{create\+\_\+std\+\_\+gathers}} ()
\item 
\mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} \mbox{\hyperlink{classlattice__struct_a4e74b88fa686b644f4a584f47f48cc8e}{global\+\_\+coordinates}} (size\+\_\+t index) const
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classlattice__struct_ada69c8d4dcc2048d42395613ba3e6040}\label{classlattice__struct_ada69c8d4dcc2048d42395613ba3e6040} 
std\+::array$<$ \mbox{\hyperlink{structlattice__struct_1_1nn__comminfo__struct}{nn\+\_\+comminfo\+\_\+struct}}, NDIRS $>$ {\bfseries nn\+\_\+comminfo}
\begin{DoxyCompactList}\small\item\em nearest neighbour comminfo struct \end{DoxyCompactList}\item 
\Hypertarget{classlattice__struct_aaedf7c99b6c1e8ea3086810bffddc44a}\label{classlattice__struct_aaedf7c99b6c1e8ea3086810bffddc44a} 
unsigned \texorpdfstring{$\ast$}{*}RESTRICT {\bfseries neighb} \mbox{[}NDIRS\mbox{]}
\begin{DoxyCompactList}\small\item\em Main neighbour index array. \end{DoxyCompactList}\item 
\Hypertarget{classlattice__struct_a1757ad2ac67042617395c55f6ab0ca18}\label{classlattice__struct_a1757ad2ac67042617395c55f6ab0ca18} 
dir\+\_\+mask\+\_\+t \texorpdfstring{$\ast$}{*}RESTRICT {\bfseries wait\+\_\+arr\+\_\+}
\begin{DoxyCompactList}\small\item\em implement waiting using mask\+\_\+t -\/ unsigned char is good for up to 4 dim. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The lattice struct defines the lattice geometry ans sets up MPI communication patterns 

Definition at line \mbox{\hyperlink{lattice_8h_source_l00062}{62}} of file \mbox{\hyperlink{lattice_8h_source}{lattice.\+h}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classlattice__struct_a93c4adb3abd6497d1b7c7154042fb0b9}\label{classlattice__struct_a93c4adb3abd6497d1b7c7154042fb0b9} 
\index{lattice\_struct@{lattice\_struct}!create\_std\_gathers@{create\_std\_gathers}}
\index{create\_std\_gathers@{create\_std\_gathers}!lattice\_struct@{lattice\_struct}}
\doxysubsubsection{\texorpdfstring{create\_std\_gathers()}{create\_std\_gathers()}}
{\footnotesize\ttfamily void lattice\+\_\+struct\+::create\+\_\+std\+\_\+gathers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Create the neighbour index arrays This is for the index array neighbours TODO\+: implement some other neighbour schemas! 

Definition at line \mbox{\hyperlink{lattice_8cpp_source_l00430}{430}} of file \mbox{\hyperlink{lattice_8cpp_source}{lattice.\+cpp}}.

\Hypertarget{classlattice__struct_a4e74b88fa686b644f4a584f47f48cc8e}\label{classlattice__struct_a4e74b88fa686b644f4a584f47f48cc8e} 
\index{lattice\_struct@{lattice\_struct}!global\_coordinates@{global\_coordinates}}
\index{global\_coordinates@{global\_coordinates}!lattice\_struct@{lattice\_struct}}
\doxysubsubsection{\texorpdfstring{global\_coordinates()}{global\_coordinates()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} lattice\+\_\+struct\+::global\+\_\+coordinates (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{index }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Return the coordinates of a site, where 1st dim (x) runs fastest etc. Useful in for (int64\+\_\+t i=0; i\texorpdfstring{$<$}{<}lattice.\+volume(); i++) \{ auto c = lattice.\+global\+\_\+coordinates(i); 

Definition at line \mbox{\hyperlink{lattice_8h_source_l00381}{381}} of file \mbox{\hyperlink{lattice_8h_source}{lattice.\+h}}.

\Hypertarget{classlattice__struct_af0b4173259da0e0436100efed653de06}\label{classlattice__struct_af0b4173259da0e0436100efed653de06} 
\index{lattice\_struct@{lattice\_struct}!node\_rank@{node\_rank}}
\index{node\_rank@{node\_rank}!lattice\_struct@{lattice\_struct}}
\doxysubsubsection{\texorpdfstring{node\_rank()}{node\_rank()}}
{\footnotesize\ttfamily int lattice\+\_\+struct\+::node\+\_\+rank (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} \&}]{loc }\end{DoxyParamCaption}) const}

The routines \doxylink{classlattice__struct_a42fcdd75a779e3d63c5ca80827f125bc}{is\+\_\+on\+\_\+mynode()}, node\+\_\+rank(), \doxylink{classlattice__struct_af06f3e962e02f77edb5a6b096a44340d}{site\+\_\+index()} implement the \"{}layout\"{} of the nodes and sites of the lattice. To be changed in different implementations! Get the node rank for coordinates This is the fundamental routine which defines how the nodes are mapped. map\+\_\+node\+\_\+layout MUST BE compatible with this algorithm! So if you change this, change that too

Here the node number along one Direction is calculated with loc \texorpdfstring{$\ast$}{*} n\+\_\+divisions/l\+\_\+size (with integer division) example\+: with l\+\_\+size=14 and n\+\_\+divisions=3, the dividers are at 0, 5, 10, 14 

Definition at line \mbox{\hyperlink{lattice_8cpp_source_l00100}{100}} of file \mbox{\hyperlink{lattice_8cpp_source}{lattice.\+cpp}}.

\Hypertarget{classlattice__struct_a11f98bf4122968756fddcdf919170d01}\label{classlattice__struct_a11f98bf4122968756fddcdf919170d01} 
\index{lattice\_struct@{lattice\_struct}!setup\_nodes@{setup\_nodes}}
\index{setup\_nodes@{setup\_nodes}!lattice\_struct@{lattice\_struct}}
\doxysubsubsection{\texorpdfstring{setup\_nodes()}{setup\_nodes()}}
{\footnotesize\ttfamily void lattice\+\_\+struct\+::setup\+\_\+nodes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



invert the mynode index -\/\texorpdfstring{$>$}{>} location (only on this node) 

Set up the basic list about all nodes NOTE\+: in case of very large number of nodes this may be inconveniently large. Alternatives? 

Definition at line \mbox{\hyperlink{lattice_8cpp_source_l00291}{291}} of file \mbox{\hyperlink{lattice_8cpp_source}{lattice.\+cpp}}.

\Hypertarget{classlattice__struct_af06f3e962e02f77edb5a6b096a44340d}\label{classlattice__struct_af06f3e962e02f77edb5a6b096a44340d} 
\index{lattice\_struct@{lattice\_struct}!site\_index@{site\_index}}
\index{site\_index@{site\_index}!lattice\_struct@{lattice\_struct}}
\doxysubsubsection{\texorpdfstring{site\_index()}{site\_index()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily unsigned lattice\+\_\+struct\+::site\+\_\+index (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} \&}]{loc }\end{DoxyParamCaption}) const}

give site index for ON NODE sites Note\+: loc really has to be on this node 

Definition at line \mbox{\hyperlink{lattice_8cpp_source_l00136}{136}} of file \mbox{\hyperlink{lattice_8cpp_source}{lattice.\+cpp}}.

\Hypertarget{classlattice__struct_adfe565822202f872c354dcc8bd5057b9}\label{classlattice__struct_adfe565822202f872c354dcc8bd5057b9} 
\index{lattice\_struct@{lattice\_struct}!site\_index@{site\_index}}
\index{site\_index@{site\_index}!lattice\_struct@{lattice\_struct}}
\doxysubsubsection{\texorpdfstring{site\_index()}{site\_index()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily unsigned lattice\+\_\+struct\+::site\+\_\+index (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classCoordinateVector__t}{Coordinate\+Vector}} \&}]{loc,  }\item[{const unsigned}]{nodeid }\end{DoxyParamCaption}) const}

give site index for nodeid sites compare to above 

Definition at line \mbox{\hyperlink{lattice_8cpp_source_l00164}{164}} of file \mbox{\hyperlink{lattice_8cpp_source}{lattice.\+cpp}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
lattice.\+h\item 
lattice.\+cpp\item 
setup\+\_\+layout\+\_\+generic.\+cpp\item 
setup\+\_\+layout\+\_\+simple.\+cpp\item 
setup\+\_\+layout\+\_\+vector.\+cpp\end{DoxyCompactItemize}
