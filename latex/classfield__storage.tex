\doxysection{field\+\_\+storage\texorpdfstring{$<$}{<} T \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classfield__storage}{}\label{classfield__storage}\index{field\_storage$<$ T $>$@{field\_storage$<$ T $>$}}


The \doxylink{classfield__storage}{field\+\_\+storage} struct contains minimal information for using the field in a loop. It is communicated to CUDA kernels and other accelerator functions.  




{\ttfamily \#include $<$field\+\_\+storage.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
auto \mbox{\hyperlink{classfield__storage_a84bf5b043403a3a422766429ce7cb73f}{get\+\_\+element}} (const unsigned i, const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&lattice) const
\item 
void \mbox{\hyperlink{classfield__storage_a1426019e6f94da67cf0fdcd418d70b57}{gather\+\_\+elements}} (T \texorpdfstring{$\ast$}{*}RESTRICT buffer, const unsigned \texorpdfstring{$\ast$}{*}RESTRICT index\+\_\+list, int n, const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&lattice) const
\begin{DoxyCompactList}\small\item\em CUDA implementation of gather\+\_\+elements without CUDA aware MPI. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classfield__storage_abe8e2e5be015206b4450b76329d5ae89}{gather\+\_\+elements\+\_\+negated}} (T \texorpdfstring{$\ast$}{*}RESTRICT buffer, const unsigned \texorpdfstring{$\ast$}{*}RESTRICT index\+\_\+list, int n, const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&lattice) const
\begin{DoxyCompactList}\small\item\em CUDA implementation of gather\+\_\+elements\+\_\+negated without CUDA aware MPI. \end{DoxyCompactList}\item 
\Hypertarget{classfield__storage_a7cb40511fcecb9010b9eaea0badcdf80}\label{classfield__storage_a7cb40511fcecb9010b9eaea0badcdf80} 
void {\bfseries place\+\_\+comm\+\_\+elements} (Direction d, Parity par, T \texorpdfstring{$\ast$}{*}RESTRICT buffer, const \mbox{\hyperlink{structlattice__struct_1_1comm__node__struct}{lattice\+\_\+struct\+::comm\+\_\+node\+\_\+struct}} \&from\+\_\+node, const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&lattice)
\begin{DoxyCompactList}\small\item\em Place boundary elements from neighbour. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classfield__storage_a90433fcaef9a79d8896e4da3917e30d7}{place\+\_\+elements}} (T \texorpdfstring{$\ast$}{*}RESTRICT buffer, const unsigned \texorpdfstring{$\ast$}{*}RESTRICT index\+\_\+list, int n, const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&lattice)
\begin{DoxyCompactList}\small\item\em CUDA implementation of place\+\_\+elements without CUDA aware MPI. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classfield__storage_a699028788bf63ffc338f95da69aa4939}{set\+\_\+local\+\_\+boundary\+\_\+elements}} (Direction dir, Parity par, const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&lattice, bool antiperiodic)
\begin{DoxyCompactList}\small\item\em Place boundary elements from local lattice (used in vectorized version) \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{classfield__storage_af57f874f77e84371e296a09f4a76ec15}{set\+\_\+element}} (const T \&value, const unsigned idx)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename T$>$\newline
class field\+\_\+storage$<$ T $>$}
The \doxylink{classfield__storage}{field\+\_\+storage} struct contains minimal information for using the field in a loop. It is communicated to CUDA kernels and other accelerator functions. 

Definition at line \mbox{\hyperlink{field__storage_8h_source_l00035}{35}} of file \mbox{\hyperlink{field__storage_8h_source}{field\+\_\+storage.\+h}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classfield__storage_a1426019e6f94da67cf0fdcd418d70b57}\label{classfield__storage_a1426019e6f94da67cf0fdcd418d70b57} 
\index{field\_storage$<$ T $>$@{field\_storage$<$ T $>$}!gather\_elements@{gather\_elements}}
\index{gather\_elements@{gather\_elements}!field\_storage$<$ T $>$@{field\_storage$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{gather\_elements()}{gather\_elements()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classfield__storage}{field\+\_\+storage}}$<$ T $>$\+::gather\+\_\+elements (\begin{DoxyParamCaption}\item[{T \texorpdfstring{$\ast$}{*}RESTRICT}]{buffer,  }\item[{const unsigned \texorpdfstring{$\ast$}{*}RESTRICT}]{index\+\_\+list,  }\item[{int}]{n,  }\item[{const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&}]{lattice }\end{DoxyParamCaption}) const}



CUDA implementation of gather\+\_\+elements without CUDA aware MPI. 

Fetch elements from the field to buffer using sites in index\+\_\+list. 

Definition at line \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source_l00041}{41}} of file \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source}{backend\+\_\+cpu/field\+\_\+storage\+\_\+backend.\+h}}.

\Hypertarget{classfield__storage_abe8e2e5be015206b4450b76329d5ae89}\label{classfield__storage_abe8e2e5be015206b4450b76329d5ae89} 
\index{field\_storage$<$ T $>$@{field\_storage$<$ T $>$}!gather\_elements\_negated@{gather\_elements\_negated}}
\index{gather\_elements\_negated@{gather\_elements\_negated}!field\_storage$<$ T $>$@{field\_storage$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{gather\_elements\_negated()}{gather\_elements\_negated()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classfield__storage}{field\+\_\+storage}}$<$ T $>$\+::gather\+\_\+elements\+\_\+negated (\begin{DoxyParamCaption}\item[{T \texorpdfstring{$\ast$}{*}RESTRICT}]{buffer,  }\item[{const unsigned \texorpdfstring{$\ast$}{*}RESTRICT}]{index\+\_\+list,  }\item[{int}]{n,  }\item[{const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&}]{lattice }\end{DoxyParamCaption}) const}



CUDA implementation of gather\+\_\+elements\+\_\+negated without CUDA aware MPI. 

requires unary -\/ !!

Definition at line \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source_l00054}{54}} of file \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source}{backend\+\_\+cpu/field\+\_\+storage\+\_\+backend.\+h}}.

\Hypertarget{classfield__storage_a84bf5b043403a3a422766429ce7cb73f}\label{classfield__storage_a84bf5b043403a3a422766429ce7cb73f} 
\index{field\_storage$<$ T $>$@{field\_storage$<$ T $>$}!get\_element@{get\_element}}
\index{get\_element@{get\_element}!field\_storage$<$ T $>$@{field\_storage$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{get\_element()}{get\_element()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
T \mbox{\hyperlink{classfield__storage}{field\+\_\+storage}}$<$ T $>$\+::get\+\_\+element (\begin{DoxyParamCaption}\item[{const unsigned}]{i,  }\item[{const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&}]{lattice }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

get\+\_\+element gathers one T-\/element from vectorized store again, idx is the \"{}site\"{} index 

Definition at line \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source_l00125}{125}} of file \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source}{backend\+\_\+cpu/field\+\_\+storage\+\_\+backend.\+h}}.

\Hypertarget{classfield__storage_a90433fcaef9a79d8896e4da3917e30d7}\label{classfield__storage_a90433fcaef9a79d8896e4da3917e30d7} 
\index{field\_storage$<$ T $>$@{field\_storage$<$ T $>$}!place\_elements@{place\_elements}}
\index{place\_elements@{place\_elements}!field\_storage$<$ T $>$@{field\_storage$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{place\_elements()}{place\_elements()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classfield__storage}{field\+\_\+storage}}$<$ T $>$\+::place\+\_\+elements (\begin{DoxyParamCaption}\item[{T \texorpdfstring{$\ast$}{*}RESTRICT}]{buffer,  }\item[{const unsigned \texorpdfstring{$\ast$}{*}RESTRICT}]{index\+\_\+list,  }\item[{int}]{n,  }\item[{const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&}]{lattice }\end{DoxyParamCaption})}



CUDA implementation of place\+\_\+elements without CUDA aware MPI. 

Vectorized implementation of setting elements. 

Definition at line \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source_l00072}{72}} of file \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source}{backend\+\_\+cpu/field\+\_\+storage\+\_\+backend.\+h}}.

\Hypertarget{classfield__storage_af57f874f77e84371e296a09f4a76ec15}\label{classfield__storage_af57f874f77e84371e296a09f4a76ec15} 
\index{field\_storage$<$ T $>$@{field\_storage$<$ T $>$}!set\_element@{set\_element}}
\index{set\_element@{set\_element}!field\_storage$<$ T $>$@{field\_storage$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{set\_element()}{set\_element()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
template$<$typename T $>$ \\
void \mbox{\hyperlink{classfield__storage}{field\+\_\+storage}}$<$ T $>$\+::set\+\_\+element (\begin{DoxyParamCaption}\item[{const T \&}]{value,  }\item[{const unsigned}]{idx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

set\+\_\+element scatters one individual T-\/element to vectorized store, using the \"{}site\"{} index idx. 

Definition at line \mbox{\hyperlink{backend__vector_2field__storage__backend_8h_source_l00130}{130}} of file \mbox{\hyperlink{backend__vector_2field__storage__backend_8h_source}{backend\+\_\+vector/field\+\_\+storage\+\_\+backend.\+h}}.

\Hypertarget{classfield__storage_a699028788bf63ffc338f95da69aa4939}\label{classfield__storage_a699028788bf63ffc338f95da69aa4939} 
\index{field\_storage$<$ T $>$@{field\_storage$<$ T $>$}!set\_local\_boundary\_elements@{set\_local\_boundary\_elements}}
\index{set\_local\_boundary\_elements@{set\_local\_boundary\_elements}!field\_storage$<$ T $>$@{field\_storage$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{set\_local\_boundary\_elements()}{set\_local\_boundary\_elements()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classfield__storage}{field\+\_\+storage}}$<$ T $>$\+::set\+\_\+local\+\_\+boundary\+\_\+elements (\begin{DoxyParamCaption}\item[{Direction}]{dir,  }\item[{Parity}]{par,  }\item[{const \mbox{\hyperlink{classlattice__struct}{lattice\+\_\+struct}} \&}]{lattice,  }\item[{bool}]{antiperiodic }\end{DoxyParamCaption})}



Place boundary elements from local lattice (used in vectorized version) 

Loop over the boundary sites -\/ i is the vector index location where the vectors are copied from are in halo\+\_\+index

get ptrs to target and source vec elements

Definition at line \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source_l00081}{81}} of file \mbox{\hyperlink{backend__cpu_2field__storage__backend_8h_source}{backend\+\_\+cpu/field\+\_\+storage\+\_\+backend.\+h}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{field__storage_8h}{field\+\_\+storage.\+h}}\item 
backend\+\_\+cpu/field\+\_\+storage\+\_\+backend.\+h\item 
backend\+\_\+gpu/field\+\_\+storage\+\_\+backend.\+h\item 
backend\+\_\+vector/field\+\_\+storage\+\_\+backend.\+h\end{DoxyCompactItemize}
