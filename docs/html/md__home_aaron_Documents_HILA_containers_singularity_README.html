<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HILA: Singularity container for HILA pre-processor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HILA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_aaron_Documents_HILA_containers_singularity_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Singularity container for HILA pre-processor </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Definition file for HILA pre-processor <a href="https://sylabs.io/singularity/">singularity</a> container. This container is meant to be a portable solution for compiling the first half of HILA code which is the parsing for specific architectures.</p>
<p>Singularity is a tailor made containerizing software often supported by HPC platforms such as CSC supercomputers.</p>
<p>One can download the singularity container hilapp.sif directly from this github repositories release page or build it from scratch. If downloaded skip directly to <b>Using singulartiy container</b> section:</p>
<div class="fragment"><div class="line">wget https://github.com/CFT-HY/HILA/releases/download/0.0.1/hilapp.sif</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md37"></a>
Building container from scratch</h1>
<h2><a class="anchor" id="autotoc_md38"></a>
1. Installing singularity</h2>
<p>Install singularity either from source of via any given package manager which is supported. Documentation can be found on the <a href="https://github.com/sylabs/singularity">GitHub page</a></p>
<p>You can simply download latest .deb or .rpm from github <a href="https://github.com/sylabs/singularity/releases">release page</a> and install directly with package manager</p>
<p>Ubuntu: </p><div class="fragment"><div class="line">dpkg -i singularity-ce_$(SINGULARITY_VERSION)-$(UBUNTU_VERSION)_amd64.deb</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md39"></a>
2. Building singularity container</h2>
<p>Note: sudo privileges are necessary for building singularity containers</p>
<p>For building the container we have two options. One can either build the container using the release version of hilapp from github or one can build using the local hilapp source. Especially in the situation that one is developing the hila preprocessor and would like to test it on a HPC platform then building the singularity container from a local source is the preferred option. There are two different singularity definition files for both cases.</p>
<p>Building using release version: </p><div class="fragment"><div class="line">sudo singularity build hilapp.sif hilapp_git.def</div>
</div><!-- fragment --><p>Building using local source </p><div class="fragment"><div class="line">sudo singularity build hilapp.sif hilapp_local.def</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md40"></a>
Using singulartiy container</h1>
<p>The hilapp.sif file will act as a singularity container and equivalently as the hilapp binary and can be used as such when pre processing HILA code. Thus you can move it to your HILA projects bin folder</p>
<div class="fragment"><div class="line">mkdir HILA/hilapp/bin</div>
<div class="line">mv hilapp.sif HILA/hilapp/bin/hilapp</div>
</div><!-- fragment --><p>Now one can simply move the singularity container to any give supercomputer.</p>
<p>One needs to cre</p>
<p>Note that on supercomputers the default paths aren't the same as on default linux operating systems. Thus one will need to mount their HILA source folder to singularity using the APPTAINER_BIND environment variable. Simple navigate to the base of your HILA source directory and run </p><pre class="fragment">export APPTAINER_BIND=$(pwd)
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
