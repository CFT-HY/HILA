<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HILA: Creating your first HILA application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HILA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_guide_2hila__applications.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Creating your first HILA application</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This section goes over how to get started with HILA and creating your first HILA application</p>
<p>Like most c++ applications, HILA applications require two things, a makefile and application source code. Due to the functionality that HILA offers, the makefile and source code follow a well defined structure. Generally HILA applications are at their core c++ and the user is free to implement any methods and libraries they see fit. But to implement the functionality that the pre processor offers, a well defined default application structure is introduced:</p>
<div class="fragment"><div class="line">applications/</div>
<div class="line">├── hila_example</div>
<div class="line">│   ├── build</div>
<div class="line">│   │   ├── foo.cpt</div>
<div class="line">│   │   ├── foo.o</div>
<div class="line">|   |   .</div>
<div class="line">|   |   ├── hila_simple_example.cpt</div>
<div class="line">|   |   ├── hila_simple_example.o</div>
<div class="line">|   |   .</div>
<div class="line">│   │   ├── bar.cpt</div>
<div class="line">│   │   └── bar.o</div>
<div class="line">│   ├── Makefile</div>
<div class="line">│   ├── parameters</div>
<div class="line">│   └── src</div>
<div class="line">│       ├── hila_example.cpp</div>
<div class="line">│       └── hila_simple_example.cpp</div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line">.</div>
</div><!-- fragment --><p>In the structure HILA offers a directly, aptly named <code>applications</code>, where one can create their respective application directories. In here we have created a application directory <code>hila_example</code> which we will highlight in this section. Inside the <code>hila_example</code> directory we have the following necessary parts, visible in the above directory tree.</p>
<p>The <code>build</code> directory is the location to which the <code>.o</code> object files are dumped into. The object files are compiled from the <code>.cpt</code> files — these will be discussed later in the documentation — created by the hila preprocessor. The resulting executable after compilation is also compiled into this directory.</p>
<p>The <code>Makefile</code> is self evidently the necessary makefile used by make to compile the hila application.</p>
<p>The <code>parameters</code> file is an optional file to define application parameters into. This is not necessary for the use of HILA applications, but is quite useful. This will be discussed later</p>
<p>Lastly the <code>src</code> directory is the directory where the user will define their HILA applications. In here we have two example HILA applications of which we will highlight <code><a class="el" href="hila__simple__example_8cpp_source.html">hila_simple_example.cpp</a></code>.</p>
<p>This file structure is necessary for the use of the makefile which handles the linking of HILA libraries used by the user.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Makefile system</h1>
<p>Each application requires a makefile to link the necessary HILA libraries and to allow specification of the target backend. An application makefile should define any target files and include the main makefile defined for the HILA libraries. The main makefile handles the HILA library linking and inclusion of the target backend.</p>
<p>The following makefile handles the compilation of two seperate hila example applications <code><a class="el" href="hila__example_8cpp_source.html">hila_example.cpp</a></code> and <code><a class="el" href="hila__simple__example_8cpp_source.html">hila_simple_example.cpp</a></code>:</p>
<p>TODO: Figure out syntax highlighs and wrapping for markdown </p><div class="fragment"><div class="line"># Give the location of the top level distribution directory wrt. this location.</div>
<div class="line"># Can be absolute or relative </div>
<div class="line">HILA_DIR := ../..</div>
<div class="line"> </div>
<div class="line">#A useful definition is to set the default target backend to be used for computing. In our example we set the default target backend to vanilla, which is the pure CPU MPI implementation.</div>
<div class="line">#This allows one to skip the need of defining ARCH in the make process `make ARCH=vanilla -&gt; make`.</div>
<div class="line">ifndef ARCH</div>
<div class="line">ARCH := vanilla</div>
<div class="line">endif</div>
<div class="line"> </div>
<div class="line"># We then include the default makefile for hila applications which handles all the nitty gritty of defining paths for the target architecture and linking all the necessary libraries. This make file also handles use of the hila preprocessor:</div>
<div class="line">include $(HILA_DIR)/libraries/main.mk</div>
<div class="line"> </div>
<div class="line">#One can also define options for the HILA preprocessor in this makefile by appending to the environment variable HILAPP_OPTS</div>
<div class="line">#In the example code with add the `-check-init` flag, but for now we will not explain what it&#39;s use is. We will discuss all the hila preprocessor flags later in the documentation.</div>
<div class="line">HILAPP_OPTS += -check-init</div>
<div class="line"> </div>
<div class="line">#Additionally one can add HILA application options in the makefile. For example we set the system dimensions by appending to the `APP_OPTS` environment variable</div>
<div class="line">APP_OPTS += -DNDIM=3</div>
<div class="line"> </div>
<div class="line"># With multiple targets we want to use &quot;make target&quot;, not &quot;make build/target&quot;.</div>
<div class="line"># This is needed to carry the dependencies to build-subdir</div>
<div class="line">hila_example: build/hila_example ; @:</div>
<div class="line">hila_simple_example: build/hila_simple_example ; @:</div>
<div class="line"> </div>
<div class="line"># Now the linking step for each target executable</div>
<div class="line">build/hila_example: Makefile build/hila_example.o $(HILA_OBJECTS) $(HEADERS)</div>
<div class="line">    $(LD) -o $@ build/hila_example.o $(HILA_OBJECTS) $(LDFLAGS) $(LDLIBS)</div>
<div class="line"> </div>
<div class="line">build/hila_simple_example: Makefile build/hila_simple_example.o $(HILA_OBJECTS) $(HEADERS)</div>
<div class="line">    $(LD) -o $@ build/hila_simple_example.o $(HILA_OBJECTS) $(LDFLAGS) $(LDLIBS)</div>
</div><!-- fragment --><p> TODO: Fix doxygen not understanding makefile syntax highlights and text wrapping</p>
<p>The only point of note is the definition for the respective object file locations with <code>build/hila_simple_example.o</code>. For an applications this needs to be formatted in the same way as above, otherwise linking of c++ libraries and HILA objects will not be done correctly. The general format would be: </p><pre class="fragment">build/{own application srouce name}: Makefile build/{own application srouce name}.o $(HILA_OBJECTS) $(HEADERS)
    $(LD) -o $@ build/{own application srouce name}.o $(HILA_OBJECTS) $(LDFLAGS) $(LDLIBS)
</pre> <h2><a class="anchor" id="autotoc_md1"></a>
Target backends</h2>
<p>The target backends are defined in the folder HILA/libraries/target_arch. There are two types of target backends. General ones defined for specific paralellization technologies:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ARCH=   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>vanilla</code>   </td><td class="markdownTableBodyNone">default CPU implementation with MPI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>AVX2</code>   </td><td class="markdownTableBodyNone">AVX vectorization optimized program using <a href="https://github.com/vectorclass"><em>vectorclass</em></a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>openmp</code>   </td><td class="markdownTableBodyNone">OpenMP parallelized program    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>cuda</code>   </td><td class="markdownTableBodyNone">Parallel <a href="https://developer.nvidia.com/cuda-toolkit">CUDA</a> program    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>hip</code>   </td><td class="markdownTableBodyNone">Parallel <a href="https://docs.amd.com/bundle/HIP-Programming-Guide-v5.3/page/Introduction_to_HIP_Programming_Guide.html">HIP</a>   </td></tr>
</table>
<p>And ones which are defined for specific HPC platforms:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ARCH   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>lumi</code>   </td><td class="markdownTableBodyNone">CPU-MPI implementation for LUMI supercomputer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>lumi-hip</code>   </td><td class="markdownTableBodyNone">GPU-MPI implementation for LUMI supercomputer using HIP    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>mahti</code>   </td><td class="markdownTableBodyNone">CPU-MPI implementation for MAHTI supercomputer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>mahti-cuda</code>   </td><td class="markdownTableBodyNone">GPU-MPI implementation for MAHTI supercomputer using CUDA   </td></tr>
</table>
<p>The latter definitions are due to the module systems and non-standard paths defined by supercomputing platforms.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Simple hila application</h1>
<p>Now that we have discussed the appropriate makefile we can move on to a simple HILA application.</p>
<p>We offer a simple HILA application <code><a class="el" href="hila__simple__example_8cpp_source.html">hila_simple_example.cpp</a></code> which computes a random gaussian field (f), it's derivative (g) and the average of the derivative field is given by:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;hila.h&quot;</span></div>
<div class="line"><span class="keyword">static_assert</span>(NDIM == 3, <span class="stringliteral">&quot;NDIM must be 3&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[]) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="namespacehila.html#a88d54715010ef67cf2fbea84b00f76bb">hila::initialize</a>(argc,argv);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// set up 32^3 lattice</span></div>
<div class="line">    lattice.<a class="code hl_function" href="classlattice__struct.html#a12f6b6a0c725399c8aa00740274b34b0">setup</a>({32,32,32});</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Random numbers are used here</span></div>
<div class="line">    <a class="code hl_function" href="namespacehila.html#a90e5e5f9365383ef279039371798f09b">hila::seed_random</a>(32345);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classField.html">Field&lt;Complex&lt;double&gt;</a>&gt; f;</div>
<div class="line">    <a class="code hl_class" href="classField.html">Field&lt;double&gt;</a> g = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// make f Gaussian random distributed</span></div>
<div class="line">    onsites(ALL) f[X].gaussian_random();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// calculate sum of 2nd derivatives of f in to g</span></div>
<div class="line">    foralldir(d) {</div>
<div class="line">        g[ALL] += abs(f[X+d] - 2*f[X] + f[X-d]);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// get average of g</span></div>
<div class="line">    <span class="keywordtype">double</span> average = 0;</div>
<div class="line">    onsites(ALL) {</div>
<div class="line">        average += g[X];</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    average = average/lattice.volume()</div>
<div class="line">    <a class="code hl_variable" href="namespacehila.html#a7d333681d94db8e9eac675f2a7b5e3e6">hila::out0</a> &lt;&lt; <span class="stringliteral">&quot;Average of g is &quot;</span> &lt;&lt; average &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// make a clean exit</span></div>
<div class="line">    <a class="code hl_function" href="namespacehila.html#ac4c73fee5aec8618b5c933a67822de1e">hila::finishrun</a>();    </div>
<div class="line">}</div>
<div class="ttc" id="aclassField_html"><div class="ttname"><a href="classField.html">Field</a></div><div class="ttdoc">something</div><div class="ttdef"><b>Definition</b> <a href="field_8h_source.html#l00061">field.h:61</a></div></div>
<div class="ttc" id="aclasslattice__struct_html_a12f6b6a0c725399c8aa00740274b34b0"><div class="ttname"><a href="classlattice__struct.html#a12f6b6a0c725399c8aa00740274b34b0">lattice_struct::setup</a></div><div class="ttdeci">void setup(const CoordinateVector &amp;siz)</div><div class="ttdoc">General lattice setup.</div><div class="ttdef"><b>Definition</b> <a href="lattice_8cpp_source.html#l00033">lattice.cpp:33</a></div></div>
<div class="ttc" id="anamespacehila_html_a7d333681d94db8e9eac675f2a7b5e3e6"><div class="ttname"><a href="namespacehila.html#a7d333681d94db8e9eac675f2a7b5e3e6">hila::out0</a></div><div class="ttdeci">std::ostream out0</div><div class="ttdoc">This writes output only from main process (node 0)</div></div>
<div class="ttc" id="anamespacehila_html_a88d54715010ef67cf2fbea84b00f76bb"><div class="ttname"><a href="namespacehila.html#a88d54715010ef67cf2fbea84b00f76bb">hila::initialize</a></div><div class="ttdeci">void initialize(int argc, char **argv)</div><div class="ttdoc">Read in command line arguments. Initialise default stream and MPI communication.</div><div class="ttdef"><b>Definition</b> <a href="initialize_8cpp_source.html#l00174">initialize.cpp:174</a></div></div>
<div class="ttc" id="anamespacehila_html_a90e5e5f9365383ef279039371798f09b"><div class="ttname"><a href="namespacehila.html#a90e5e5f9365383ef279039371798f09b">hila::seed_random</a></div><div class="ttdeci">void seed_random(uint64_t seed, bool device_rng=true)</div><div class="ttdef"><b>Definition</b> <a href="random_8cpp_source.html#l00078">random.cpp:78</a></div></div>
<div class="ttc" id="anamespacehila_html_ac4c73fee5aec8618b5c933a67822de1e"><div class="ttname"><a href="namespacehila.html#ac4c73fee5aec8618b5c933a67822de1e">hila::finishrun</a></div><div class="ttdeci">void finishrun()</div><div class="ttdoc">Normal, controlled exit - all nodes must call this. Prints timing information and information about c...</div><div class="ttdef"><b>Definition</b> <a href="initialize_8cpp_source.html#l00394">initialize.cpp:394</a></div></div>
</div><!-- fragment --><p>Like all c++ applications, our program starts withing the main function. Before it, we need to include some necessary header files. At the beginning of the file we include the <code><a class="el" href="hila_8h_source.html">hila.h</a></code> header file which contains all of the definitions for HILA libraries. This is necessary to gain access to HILA functionality. Additionally we use a static_assert to test our defined application option <code>-DNDIM=3</code>. This is useful redundancy so that we do not compile our application incorrectly. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;hila.h&quot;</span></div>
<div class="line"><span class="keyword">static_assert</span>(NDIM == 3, <span class="stringliteral">&quot;NDIM must be 3&quot;</span>);</div>
</div><!-- fragment --><p>After this process we call a few initialization and setup functions with the following lines of code:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="namespacehila.html#a88d54715010ef67cf2fbea84b00f76bb">hila::initialize</a>(argc,argv);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// set up 32^3 lattice</span></div>
<div class="line">lattice.<a class="code hl_function" href="classlattice__struct.html#a12f6b6a0c725399c8aa00740274b34b0">setup</a>({32,32,32});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Random numbers are used here</span></div>
<div class="line"><a class="code hl_function" href="namespacehila.html#a90e5e5f9365383ef279039371798f09b">hila::seed_random</a>(32345);</div>
</div><!-- fragment --><p>The first command <code>hila::initialize(argc,argv)</code> handles the initialization of mpi and reading in command line arguments and parameter files. This is a vital part of all HILA applications, but it is not too important for the user to understand what happens within it.</p>
<p>Next we setup the lattice and it's size with the command <code>lattice.setup({32,32,32})</code>. The <code>lattice</code> object is defined globally within hila and contains all the information on how the lattice is split within MPI. As with initialization, this is also a vital part of any HILA application, but is designed in a way where the user need not worry about it. Note that due to NDIM option above passing for example <code>{32,32}</code> to <code>lattice.setup()</code> would result in a runtime error. TODO: CATCH THIS ERROR</p>
<p>Lastly for setup we initialize the random number generator with the command <code>hila::seed_random(32345)</code>. This will initialise the random number generator with the seed 32345.</p>
<p>Next in the application we define two Fields with:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classField.html">Field&lt;Complex&lt;double&gt;</a>&gt; f;</div>
<div class="line"><a class="code hl_class" href="classField.html">Field&lt;double&gt;</a> g = 0;</div>
</div><!-- fragment --><p>A <a class="el" href="classField.html" title="something">Field</a> in HILA is the numerical object which we operate on and iterate over. The size and MPI layout of the Fields are inherited from the lattice structure which was initialized before hand with the <code>lattice.setup()</code> command. <a class="el" href="classField.html" title="something">Field</a> is a c++ object which can be of many different data types and operations between them have been defined within HILA. This is implemented using standard c++ object oriented programming where we define the type within the brackets &lt;T&gt;. The available datatypes will be thoroughly documented later. For now we define one field of type <code><a class="el" href="classComplex.html">Complex</a>&lt;double&gt;</code> and <code>double</code>. The latter <a class="el" href="classField.html" title="something">Field</a> g is initialized with the = constructor, where we set the <a class="el" href="classField.html" title="something">Field</a> to be uniformly 0. The f <a class="el" href="classField.html" title="something">Field</a> is initialized to null.</p>
<p>We then introduce our first onsites loop which set's a complex gaussian random number for each point within the field:</p>
<div class="fragment"><div class="line">onsites(ALL) f[X].gaussian_random();</div>
</div><!-- fragment --><p>In essence this is the most important functionality that HILA offers. Onsites loops allow the user to very simply loop over the whole field without having to think about indexing, memory alignment, communication or any of the complications that writing c++ and MPI brings about. Essentially these loops are glorified for loops. With the HILA pre processor the above onsites loop expands to the following c++ code:</p>
<details  markdown="1">
<summary >
onsites expansion</summary>
<p></p>
<div class="fragment"><div class="line"><span class="comment">// make f Gaussian random distributed</span></div>
<div class="line">     <span class="comment">//--  onsites(ALL) f[X].gaussian_random()</span></div>
<div class="line">    {</div>
<div class="line">      <a class="code hl_function" href="namespacehila.html#acdf775f23790c6c2694313db8643c873">hila::check_that_rng_is_initialized</a>();</div>
<div class="line">      <a class="code hl_class" href="classField.html">Field&lt;Complex&lt;double&gt;</a>&gt; &amp; _HILA_field_f = f;</div>
<div class="line">      _HILA_field_f.<a class="code hl_function" href="classField.html#ab5b73a0d1ca55fb875e39558c721cc81">check_alloc</a>();</div>
<div class="line">      <span class="keyword">const</span> <a class="code hl_class" href="classlattice__struct.html">lattice_struct</a> &amp; loop_lattice = lattice;</div>
<div class="line">      <span class="keyword">const</span> <span class="keywordtype">int</span> loop_begin = loop_lattice.loop_begin(Parity::all);</div>
<div class="line">      <span class="keyword">const</span> <span class="keywordtype">int</span> loop_end   = loop_lattice.loop_end(Parity::all);</div>
<div class="line">      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> _HILA_index = loop_begin; _HILA_index &lt; loop_end; ++_HILA_index) {</div>
<div class="line">        <a class="code hl_class" href="classComplex.html">Complex&lt;double&gt;</a> _HILA_field_f_at_X;</div>
<div class="line">        <span class="comment">// Initial value of variable _HILA_field_f_at_X not needed</span></div>
<div class="line">        _HILA_field_f_at_X.<a class="code hl_function" href="classComplex.html#adc9a81d7f2b659e644ad94f49d656ad5">gaussian_random</a>();</div>
<div class="line">        _HILA_field_f.<a class="code hl_function" href="classField.html#a6e46f9db917092b26a09fe72dc625892">set_value_at</a>(_HILA_field_f_at_X, _HILA_index);</div>
<div class="line">      }</div>
<div class="line">      <a class="code hl_function" href="namespacehila.html#a5029fd8270d13272ea28643b49f12af6">hila::set_allreduce</a>(<span class="keyword">true</span>);</div>
<div class="line">      _HILA_field_f.<a class="code hl_function" href="classField.html#a23333e84caea23096552c81d4d14228f">mark_changed</a>(Parity::all);</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//----------</span></div>
<div class="ttc" id="aclassComplex_html"><div class="ttname"><a href="classComplex.html">Complex</a></div><div class="ttdef"><b>Definition</b> <a href="cmplx_8h_source.html#l00035">cmplx.h:35</a></div></div>
<div class="ttc" id="aclassComplex_html_adc9a81d7f2b659e644ad94f49d656ad5"><div class="ttname"><a href="classComplex.html#adc9a81d7f2b659e644ad94f49d656ad5">Complex::gaussian_random</a></div><div class="ttdeci">Complex&lt; T &gt; &amp; gaussian_random(double width=1.0) out_only</div><div class="ttdoc">Produces complex gaussian random values.</div><div class="ttdef"><b>Definition</b> <a href="cmplx_8h_source.html#l00158">cmplx.h:158</a></div></div>
<div class="ttc" id="aclassField_html_a23333e84caea23096552c81d4d14228f"><div class="ttname"><a href="classField.html#a23333e84caea23096552c81d4d14228f">Field::mark_changed</a></div><div class="ttdeci">void mark_changed(const Parity p) const</div><div class="ttdoc">Bookkeeping for field communication.</div><div class="ttdef"><b>Definition</b> <a href="field_8h_source.html#l00414">field.h:414</a></div></div>
<div class="ttc" id="aclassField_html_a6e46f9db917092b26a09fe72dc625892"><div class="ttname"><a href="classField.html#a6e46f9db917092b26a09fe72dc625892">Field::set_value_at</a></div><div class="ttdeci">void set_value_at(const A &amp;value, unsigned i)</div><div class="ttdef"><b>Definition</b> <a href="field_8h_source.html#l00631">field.h:631</a></div></div>
<div class="ttc" id="aclassField_html_ab5b73a0d1ca55fb875e39558c721cc81"><div class="ttname"><a href="classField.html#ab5b73a0d1ca55fb875e39558c721cc81">Field::check_alloc</a></div><div class="ttdeci">void check_alloc()</div><div class="ttdoc">Allocate Field if it is not already allocated.</div><div class="ttdef"><b>Definition</b> <a href="field_8h_source.html#l00396">field.h:396</a></div></div>
<div class="ttc" id="aclasslattice__struct_html"><div class="ttname"><a href="classlattice__struct.html">lattice_struct</a></div><div class="ttdef"><b>Definition</b> <a href="lattice_8h_source.html#l00062">lattice.h:62</a></div></div>
<div class="ttc" id="anamespacehila_html_a5029fd8270d13272ea28643b49f12af6"><div class="ttname"><a href="namespacehila.html#a5029fd8270d13272ea28643b49f12af6">hila::set_allreduce</a></div><div class="ttdeci">void set_allreduce(bool on=true)</div><div class="ttdoc">set allreduce on (default) or off on the next reduction</div><div class="ttdef"><b>Definition</b> <a href="com__mpi_8cpp_source.html#l00132">com_mpi.cpp:132</a></div></div>
<div class="ttc" id="anamespacehila_html_acdf775f23790c6c2694313db8643c873"><div class="ttname"><a href="namespacehila.html#acdf775f23790c6c2694313db8643c873">hila::check_that_rng_is_initialized</a></div><div class="ttdeci">void check_that_rng_is_initialized()</div><div class="ttdoc">RNG initialization check - emitted on loops.</div><div class="ttdef"><b>Definition</b> <a href="random_8cpp_source.html#l00212">random.cpp:212</a></div></div>
</div><!-- fragment --><p> AHHH SCARY PUT IT AWAY!!! </p>
</details>
<p>As we can see the expansion is complicated and scary, one can imagine how complicated it get's with different computing platforms. The X variable withing the onsites loop is a reserved variable within HILA applications. This variable is what defines the index of every point within the field. Appropriately the command <code>f[X].gaussian_random()</code> defines a gaussian random number for each point X within the field f. The ALL parameter within the onsites loop defines that we will iterate throughout the whole field. We will discuss variability of this parameter later in the documentation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
